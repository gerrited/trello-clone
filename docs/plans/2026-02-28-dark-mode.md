# Dark Mode Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add system/dark/light theme switching to the web app via the user menu, persisted to localStorage.

**Architecture:** Tailwind v4 class-based dark mode (`@custom-variant dark`). A `ThemeProvider` component sets/removes the `dark` class on `<html>` and subscribes to the OS media query when preference is "system". Preference is stored in a Zustand persist store. All 35 affected components get `dark:` variants added.

**Tech Stack:** React 19, Tailwind CSS v4, Zustand v5 with `persist` middleware, lucide-react icons

---

## Color Mapping Reference

| Light class | Dark variant |
|---|---|
| `bg-white` | `dark:bg-gray-800` |
| `bg-gray-50` | `dark:bg-gray-900` |
| `bg-gray-100` | `dark:bg-gray-700` |
| `bg-gray-200` | `dark:bg-gray-600` |
| `border-gray-100` | `dark:border-gray-700` |
| `border-gray-200` | `dark:border-gray-700` |
| `border-gray-300` | `dark:border-gray-600` |
| `text-gray-900` | `dark:text-gray-100` |
| `text-gray-800` | `dark:text-gray-200` |
| `text-gray-700` | `dark:text-gray-300` |
| `text-gray-600` | `dark:text-gray-400` |
| `text-gray-500` | `dark:text-gray-400` |
| `text-gray-400` | `dark:text-gray-500` |
| `hover:bg-gray-50` | `dark:hover:bg-gray-700` |
| `hover:bg-gray-100` | `dark:hover:bg-gray-700` |
| `hover:bg-gray-200` | `dark:hover:bg-gray-600` |

---

### Task 1: Infrastructure — CSS, ThemeStore, ThemeProvider, App.tsx

**Files:**
- Modify: `apps/web/src/main.css`
- Create: `apps/web/src/stores/themeStore.ts`
- Create: `apps/web/src/components/layout/ThemeProvider.tsx`
- Modify: `apps/web/src/App.tsx`

**Step 1: Add dark variant to CSS**

In `apps/web/src/main.css`, replace the entire file with:

```css
@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));
```

**Step 2: Create the theme store**

Create `apps/web/src/stores/themeStore.ts`:

```ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export type ThemePreference = 'system' | 'dark' | 'light';

interface ThemeState {
  preference: ThemePreference;
  setPreference: (preference: ThemePreference) => void;
}

export const useThemeStore = create<ThemeState>()(
  persist(
    (set) => ({
      preference: 'system',
      setPreference: (preference) => set({ preference }),
    }),
    { name: 'theme-store' },
  ),
);
```

**Step 3: Create ThemeProvider**

Create `apps/web/src/components/layout/ThemeProvider.tsx`:

```tsx
import { useEffect } from 'react';
import type { ReactNode } from 'react';
import { useThemeStore } from '../../stores/themeStore.js';

export function ThemeProvider({ children }: { children: ReactNode }) {
  const preference = useThemeStore((s) => s.preference);

  useEffect(() => {
    const root = document.documentElement;

    if (preference === 'dark') {
      root.classList.add('dark');
      return;
    }

    if (preference === 'light') {
      root.classList.remove('dark');
      return;
    }

    // System mode: sync with OS preference
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handler = (e: MediaQueryListEvent) => {
      root.classList.toggle('dark', e.matches);
    };

    root.classList.toggle('dark', mediaQuery.matches);
    mediaQuery.addEventListener('change', handler);
    return () => mediaQuery.removeEventListener('change', handler);
  }, [preference]);

  return <>{children}</>;
}
```

**Step 4: Wrap App with ThemeProvider**

In `apps/web/src/App.tsx`, add the import and wrap `<BrowserRouter>`:

```tsx
import { BrowserRouter, Routes, Route, Navigate } from 'react-router';
import { useEffect } from 'react';
import { useAuthStore } from './stores/authStore.js';
import { getMe } from './api/auth.api.js';
import { LoginPage } from './features/auth/LoginPage.js';
import { RegisterPage } from './features/auth/RegisterPage.js';
import { AuthCallbackPage } from './features/auth/AuthCallbackPage.js';
import { TeamsPage } from './features/teams/TeamsPage.js';
import { BoardListPage } from './features/boards/BoardListPage.js';
import { BoardPage } from './features/boards/BoardPage.js';
import { CalendarPage } from './features/boards/CalendarPage.js';
import { SharedBoardPage } from './features/boards/SharedBoardPage.js';
import { ThemeProvider } from './components/layout/ThemeProvider.js';

function AuthGuard({ children }: { children: React.ReactNode }) {
  const { user, isLoading } = useAuthStore();

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <p className="text-gray-500">Laden...</p>
      </div>
    );
  }

  if (!user) {
    return <Navigate to="/login" />;
  }

  return <>{children}</>;
}

function AppRoutes() {
  return (
    <Routes>
      <Route path="/login" element={<LoginPage />} />
      <Route path="/register" element={<RegisterPage />} />
      <Route path="/auth/callback" element={<AuthCallbackPage />} />
      <Route path="/teams" element={<AuthGuard><TeamsPage /></AuthGuard>} />
      <Route path="/teams/:teamId/boards" element={<AuthGuard><BoardListPage /></AuthGuard>} />
      <Route path="/teams/:teamId/boards/:boardId" element={<AuthGuard><BoardPage /></AuthGuard>} />
      <Route path="/teams/:teamId/boards/:boardId/calendar" element={<AuthGuard><CalendarPage /></AuthGuard>} />
      <Route path="/shared/:token" element={<SharedBoardPage />} />
      <Route path="*" element={<Navigate to="/teams" />} />
    </Routes>
  );
}

export function App() {
  useEffect(() => {
    getMe()
      .then(({ user }) => {
        useAuthStore.getState().setAuth(user, useAuthStore.getState().accessToken || '');
      })
      .catch(() => {
        useAuthStore.getState().setLoading(false);
      });
  }, []);

  return (
    <ThemeProvider>
      <BrowserRouter>
        <AppRoutes />
      </BrowserRouter>
    </ThemeProvider>
  );
}
```

**Step 5: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 6: Commit**

```bash
git add apps/web/src/main.css apps/web/src/stores/themeStore.ts apps/web/src/components/layout/ThemeProvider.tsx apps/web/src/App.tsx
git commit -m "feat: add dark mode infrastructure (ThemeProvider, themeStore, CSS variant)"
```

---

### Task 2: UserMenu — Appearance Section

**Files:**
- Modify: `apps/web/src/features/auth/UserMenu.tsx`

**Step 1: Replace the entire file**

```tsx
import { useState, useRef, useEffect } from 'react';
import { useNavigate } from 'react-router';
import { Sun, Moon, Monitor } from 'lucide-react';
import { useAuthStore } from '../../stores/authStore.js';
import { useThemeStore } from '../../stores/themeStore.js';
import { logoutUser } from '../../api/auth.api.js';
import { EditProfileModal } from './EditProfileModal.js';
import { ChangePasswordModal } from './ChangePasswordModal.js';

export function UserMenu() {
  const [isOpen, setIsOpen] = useState(false);
  const [showEditProfile, setShowEditProfile] = useState(false);
  const [showChangePassword, setShowChangePassword] = useState(false);
  const popoverRef = useRef<HTMLDivElement>(null);
  const navigate = useNavigate();
  const { user, logout } = useAuthStore();
  const { preference, setPreference } = useThemeStore();

  useEffect(() => {
    if (!isOpen) return;
    function handleClickOutside(e: MouseEvent) {
      if (popoverRef.current && !popoverRef.current.contains(e.target as Node)) {
        setIsOpen(false);
      }
    }
    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [isOpen]);

  const handleLogout = async () => {
    setIsOpen(false);
    await logoutUser();
    logout();
    navigate('/login');
  };

  const initials =
    user?.displayName
      .split(' ')
      .map((n: string) => n[0])
      .join('')
      .toUpperCase()
      .slice(0, 2) ?? '?';

  return (
    <>
      <div className="relative" ref={popoverRef}>
        <button
          onClick={() => setIsOpen((v) => !v)}
          className="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
          aria-label="Benutzerprofil"
          aria-expanded={isOpen}
        >
          <div className="w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center text-xs font-bold text-white flex-shrink-0">
            {initials}
          </div>
          <span className="text-sm text-gray-700 dark:text-gray-300 hidden sm:inline">{user?.displayName}</span>
        </button>

        {isOpen && (
          <div className="absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50">
            <div className="px-4 py-3 border-b border-gray-100 dark:border-gray-700">
              <p className="text-sm font-semibold text-gray-800 dark:text-gray-200 truncate">{user?.displayName}</p>
              <p className="text-xs text-gray-500 dark:text-gray-400 truncate">{user?.email}</p>
            </div>
            <div className="py-1">
              <button
                onClick={() => {
                  setIsOpen(false);
                  setShowEditProfile(true);
                }}
                className="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
              >
                Profil bearbeiten
              </button>
              {user?.hasPassword && (
                <button
                  onClick={() => {
                    setIsOpen(false);
                    setShowChangePassword(true);
                  }}
                  className="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                >
                  Passwort ändern
                </button>
              )}
            </div>
            {/* Appearance section */}
            <div className="py-2 border-t border-gray-100 dark:border-gray-700">
              <p className="px-4 pb-1 text-xs font-medium text-gray-500 dark:text-gray-400">Darstellung</p>
              <div className="flex items-center gap-1 px-3">
                {([
                  { value: 'light', icon: Sun, label: 'Hell' },
                  { value: 'system', icon: Monitor, label: 'System' },
                  { value: 'dark', icon: Moon, label: 'Dunkel' },
                ] as const).map(({ value, icon: Icon, label }) => (
                  <button
                    key={value}
                    onClick={() => setPreference(value)}
                    className={`flex-1 flex flex-col items-center gap-0.5 px-1 py-1.5 rounded-lg text-xs transition-colors ${
                      preference === value
                        ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'
                        : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'
                    }`}
                    title={label}
                  >
                    <Icon size={14} />
                    {label}
                  </button>
                ))}
              </div>
            </div>
            <div className="py-1 border-t border-gray-100 dark:border-gray-700">
              <button
                onClick={handleLogout}
                className="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
              >
                Abmelden
              </button>
            </div>
          </div>
        )}
      </div>

      <EditProfileModal isOpen={showEditProfile} onClose={() => setShowEditProfile(false)} />
      <ChangePasswordModal isOpen={showChangePassword} onClose={() => setShowChangePassword(false)} />
    </>
  );
}
```

**Step 2: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 3: Commit**

```bash
git add apps/web/src/features/auth/UserMenu.tsx
git commit -m "feat: add appearance (dark mode) section to UserMenu"
```

---

### Task 3: Core UI Components

**Files:**
- Modify: `apps/web/src/components/ui/Button.tsx`
- Modify: `apps/web/src/components/ui/Input.tsx`
- Modify: `apps/web/src/components/ui/Modal.tsx`

**Step 1: Update Button.tsx — only outline and ghost variants need dark variants**

Replace the `variants` object:

```tsx
const variants = {
  primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
  secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',
  outline: 'border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-blue-500',
  ghost: 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:ring-blue-500',
};
```

**Step 2: Update Input.tsx — add dark variants to label, input, and error**

Replace the return:

```tsx
return (
  <div>
    {label && <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">{label}</label>}
    <input
      ref={ref}
      className={`w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 ${
        error ? 'border-red-500 dark:border-red-400' : 'border-gray-300 dark:border-gray-600'
      } ${className}`}
      {...props}
    />
    {error && <p className="mt-1 text-sm text-red-600 dark:text-red-400">{error}</p>}
  </div>
);
```

**Step 3: Update Modal.tsx — add dark variant to the dialog background**

Change the `className` on the inner dialog div (line 79):

```tsx
className="relative bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[calc(100vh-8rem)] overflow-y-auto z-10"
```

**Step 4: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 5: Commit**

```bash
git add apps/web/src/components/ui/Button.tsx apps/web/src/components/ui/Input.tsx apps/web/src/components/ui/Modal.tsx
git commit -m "feat: add dark mode to Button, Input, Modal components"
```

---

### Task 4: Layout Components

**Files:**
- Modify: `apps/web/src/components/layout/AppLayout.tsx`
- Modify: `apps/web/src/components/layout/AuthLayout.tsx`
- Modify: `apps/web/src/components/layout/NotificationBell.tsx`

**Step 1: Update AppLayout.tsx**

Replace the return statement:

```tsx
return (
  <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
    <header className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
      <div className="max-w-7xl mx-auto px-2 sm:px-4 h-12 sm:h-14 flex items-center justify-between">
        <Link to="/teams" className="text-base sm:text-lg font-bold text-gray-900 dark:text-gray-100">
          Trello Clone
        </Link>
        <div className="flex items-center gap-2 sm:gap-4">
          <button
            onClick={() => setShowCommandPalette(true)}
            className="flex items-center gap-1.5 px-2.5 py-1.5 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
            title="Suche (Ctrl+K)"
          >
            <Search size={14} />
            <span className="hidden sm:inline text-xs">Suche</span>
            <kbd className="hidden sm:inline text-[10px] px-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded">
              ⌘K
            </kbd>
          </button>
          <NotificationBell />
          <UserMenu />
        </div>
      </div>
    </header>
    <main>{children}</main>
    <CommandPalette
      isOpen={showCommandPalette}
      onClose={() => setShowCommandPalette(false)}
    />
  </div>
);
```

**Step 2: Update AuthLayout.tsx**

Replace the return:

```tsx
return (
  <div className="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4">
    <div className="w-full max-w-md">
      <h1 className="text-3xl font-bold text-center text-gray-900 dark:text-gray-100 mb-8">Trello Clone</h1>
      <div className="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6">{children}</div>
    </div>
  </div>
);
```

**Step 3: Update NotificationBell.tsx — update popover and notification items**

Change the popover container (line 90):
```tsx
<div className="absolute right-0 top-full mt-2 w-80 sm:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-[70vh] flex flex-col">
```

Change the header div (line 92):
```tsx
<div className="flex items-center justify-between p-3 border-b border-gray-100 dark:border-gray-700">
  <h3 className="text-sm font-semibold text-gray-800 dark:text-gray-200">Benachrichtigungen</h3>
```

Change loading/empty states:
```tsx
<div className="p-4 text-center text-sm text-gray-400 dark:text-gray-500">Laden...</div>
```
```tsx
<div className="p-6 text-center text-sm text-gray-400 dark:text-gray-500">
  Keine Benachrichtigungen
</div>
```

Change notification button (line 119):
```tsx
className={`w-full text-left px-3 py-2.5 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-50 dark:border-gray-700 ${
  !notif.isRead ? 'bg-blue-50/50 dark:bg-blue-900/20' : ''
}`}
```

Change notification text (line 130):
```tsx
<p className="text-xs text-gray-700 dark:text-gray-300 leading-relaxed">
```

Change timestamp (line 133):
```tsx
<p className="text-[10px] text-gray-400 dark:text-gray-500 mt-0.5">
```

**Step 4: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 5: Commit**

```bash
git add apps/web/src/components/layout/AppLayout.tsx apps/web/src/components/layout/AuthLayout.tsx apps/web/src/components/layout/NotificationBell.tsx
git commit -m "feat: add dark mode to layout components"
```

---

### Task 5: Auth Pages

**Files:**
- Modify: `apps/web/src/features/auth/LoginPage.tsx`
- Modify: `apps/web/src/features/auth/RegisterPage.tsx` (same pattern as LoginPage)
- Modify: `apps/web/src/features/auth/EditProfileModal.tsx`
- Modify: `apps/web/src/features/auth/ChangePasswordModal.tsx`

**Step 1: Update LoginPage.tsx**

The `AuthLayout` and `Input`/`Button` already handle their own dark mode after Task 3-4. Update the remaining hardcoded classes:

Change the error div:
```tsx
{error && <div className="mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-sm">{error}</div>}
```

Change the divider (line 52):
```tsx
<div className="w-full border-t border-gray-300 dark:border-gray-600" />
```

Change the "oder" span (line 55):
```tsx
<span className="bg-white dark:bg-gray-800 px-2 text-gray-500 dark:text-gray-400">oder</span>
```

Change the OAuth buttons:
```tsx
className="w-full inline-flex items-center justify-center gap-2 rounded-lg border border-gray-300 dark:border-gray-600 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"
```

Change the footer text:
```tsx
<p className="mt-6 text-center text-sm text-gray-600 dark:text-gray-400">
```

**Step 2: Update RegisterPage.tsx**

Apply the same pattern as LoginPage — same OAuth buttons, same divider, same "oder" span, same footer text. RegisterPage also has `<h2 className="text-xl font-semibold mb-6">` — add `dark:text-gray-100`.

**Step 3: Update EditProfileModal.tsx**

Change the heading in the modal:
```tsx
<h2 className="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">Profil bearbeiten</h2>
```

(The form inputs use `Input` component which already handles dark mode. The `Modal` wrapper is also handled.)

**Step 4: Update ChangePasswordModal.tsx**

Read this file first if it has not been read yet. Apply the same heading pattern.

**Step 5: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 6: Commit**

```bash
git add apps/web/src/features/auth/
git commit -m "feat: add dark mode to auth pages"
```

---

### Task 6: Teams and Board List Pages

**Files:**
- Modify: `apps/web/src/features/teams/TeamsPage.tsx`
- Modify: `apps/web/src/features/boards/BoardListPage.tsx`

**Step 1: Update TeamsPage.tsx**

Change heading:
```tsx
<h1 className="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100">Meine Teams</h1>
```

Change the create form container:
```tsx
<div className="mb-4 sm:mb-6 p-3 sm:p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
```

Change loading/empty text:
```tsx
<p className="text-gray-500 dark:text-gray-400">Laden...</p>
```
```tsx
<p className="text-gray-500 dark:text-gray-400 mb-4">Du bist noch in keinem Team.</p>
```

Change team card:
```tsx
className="relative group p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-sm transition-all"
```

Change team name and role:
```tsx
<h3 className="font-semibold text-gray-900 dark:text-gray-100">{team.name}</h3>
<p className="text-sm text-gray-500 dark:text-gray-400 mt-1 capitalize">{team.role}</p>
```

**Step 2: Update BoardListPage.tsx**

Change heading:
```tsx
<h1 className="text-2xl font-bold text-gray-900 dark:text-gray-100">Boards</h1>
```

Change loading/empty text:
```tsx
<p className="text-gray-500 dark:text-gray-400">Laden...</p>
<p className="text-gray-500 dark:text-gray-400">Noch keine Boards vorhanden.</p>
```

Change board card link:
```tsx
className="block p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-sm transition-all"
```

Change board name and description:
```tsx
<h3 className="font-semibold text-gray-900 dark:text-gray-100">{board.name}</h3>
{board.description && (
  <p className="text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2">{board.description}</p>
)}
```

**Step 3: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 4: Commit**

```bash
git add apps/web/src/features/teams/TeamsPage.tsx apps/web/src/features/boards/BoardListPage.tsx
git commit -m "feat: add dark mode to TeamsPage and BoardListPage"
```

---

### Task 7: Column, Card, and Add-Item Components

**Files:**
- Modify: `apps/web/src/features/boards/ColumnComponent.tsx`
- Modify: `apps/web/src/features/boards/CardComponent.tsx`
- Modify: `apps/web/src/features/boards/AddCardForm.tsx`
- Modify: `apps/web/src/features/boards/AddColumnForm.tsx`

**Step 1: Update ColumnComponent.tsx**

Change the column outer div (line 69):
```tsx
className="flex-shrink-0 w-full sm:w-72 bg-gray-100 dark:bg-gray-700 rounded-lg flex flex-col max-h-[calc(100vh-14rem)] sm:max-h-[calc(100vh-10rem)]"
```

Change the column title:
```tsx
<h3 className="font-semibold text-sm text-gray-700 dark:text-gray-300">{column.name}</h3>
```

Change the card count badge:
```tsx
className={`text-xs px-1.5 py-0.5 rounded-full ${
  isOverWipLimit ? 'bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400' : 'bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300'
}`}
```

Change the delete button:
```tsx
className="p-1 text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50"
```
(no dark needed — `text-gray-400` is OK in dark too)

**Step 2: Update CardComponent.tsx**

Change the card outer div:
```tsx
className={`relative group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 shadow-sm cursor-pointer transition-shadow hover:shadow-md ${
  isDragging ? 'opacity-50 shadow-lg cursor-grabbing' : ''
}`}
```

Change the move button trigger (line 84):
```tsx
triggerClassName="p-1 rounded bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-400 hover:text-gray-600 shadow-sm"
```

Change the card title:
```tsx
<p className="text-sm text-gray-900 dark:text-gray-100 mt-1">{card.title}</p>
```

Change metadata text:
```tsx
<div className="flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400 flex-wrap">
```

Change the due date default style (in `getDueDateStyle`):
```tsx
return { className: 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300', label: '' };
```

Change assignee ring:
```tsx
className="w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center ring-2 ring-white dark:ring-gray-800"
```

**Step 3: Update AddCardForm.tsx**

Change the "add card" trigger button:
```tsx
className="w-full text-left text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
```

Change the textarea:
```tsx
className="w-full rounded border border-gray-300 dark:border-gray-600 p-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
```

Change the inactive type pill classes in `TYPE_PILL_COLORS`:
```tsx
const TYPE_PILL_COLORS: Record<string, { active: string; inactive: string }> = {
  task: { active: 'bg-blue-100 text-blue-700', inactive: 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700' },
  story: { active: 'bg-green-100 text-green-700', inactive: 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700' },
  bug: { active: 'bg-red-100 text-red-700', inactive: 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700' },
};
```

**Step 4: Update AddColumnForm.tsx**

Change the "add column" trigger button:
```tsx
className="flex-shrink-0 w-full sm:w-72 h-12 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-600 dark:hover:text-gray-300 flex items-center justify-center text-sm transition-colors"
```

Change the open form container:
```tsx
<div className="flex-shrink-0 w-full sm:w-72 bg-gray-100 dark:bg-gray-700 rounded-lg p-3">
```

Change the input inside the form:
```tsx
className="w-full rounded border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
```

**Step 5: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 6: Commit**

```bash
git add apps/web/src/features/boards/ColumnComponent.tsx apps/web/src/features/boards/CardComponent.tsx apps/web/src/features/boards/AddCardForm.tsx apps/web/src/features/boards/AddColumnForm.tsx
git commit -m "feat: add dark mode to column, card, and add-item components"
```

---

### Task 8: Swimlane, MoveCardPopover, LabelPicker

**Files:**
- Modify: `apps/web/src/features/boards/SwimlaneRow.tsx`
- Modify: `apps/web/src/features/boards/AddSwimlaneForm.tsx`
- Modify: `apps/web/src/features/boards/MoveCardPopover.tsx`
- Modify: `apps/web/src/features/boards/LabelPicker.tsx`

**Step 1: Update SwimlaneRow.tsx**

Change the edit mode container:
```tsx
<div className="flex items-center gap-1 py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded">
```

Change the edit input:
```tsx
className="flex-1 rounded border border-gray-300 dark:border-gray-600 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Change the display mode heading:
```tsx
<h4 className="font-semibold text-sm text-gray-700 dark:text-gray-300 truncate">{swimlane.name}</h4>
```

Change the action buttons:
```tsx
className="p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 rounded"
```
```tsx
className="p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded"
```

**Step 2: Update AddSwimlaneForm.tsx**

Change the trigger button:
```tsx
className="w-full h-10 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-600 dark:hover:text-gray-300 flex items-center justify-center text-sm transition-colors"
```

Change the form container:
```tsx
<div className="bg-gray-50 dark:bg-gray-700 rounded-lg p-3 space-y-2">
```

Change the input:
```tsx
className="w-full rounded border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
```

**Step 3: Update MoveCardPopover.tsx**

Change the dropdown container (line 110):
```tsx
className="fixed z-50 w-52 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"
```

Change the section header divs:
```tsx
<div className="px-3 py-2 border-b border-gray-100 dark:border-gray-700">
  <h4 className="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Spalte wechseln</h4>
</div>
```

Change the column buttons:
```tsx
className={`w-full flex items-center gap-2 px-3 py-2 text-sm text-left transition-colors ${
  isCurrent
    ? 'text-blue-700 dark:text-blue-400 font-medium cursor-default'
    : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer'
} disabled:opacity-60`}
```

Apply same pattern to swimlane buttons and the swimlane section header border:
```tsx
<div className="px-3 py-2 border-t border-b border-gray-100 dark:border-gray-700">
  <h4 className="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">Swimlane wechseln</h4>
</div>
```

**Step 4: Update LabelPicker.tsx**

Change the trigger button:
```tsx
className="flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
```

Change the dropdown container:
```tsx
className="absolute z-50 top-full left-0 mt-1 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"
```

Change the header:
```tsx
<div className="p-3 border-b border-gray-100 dark:border-gray-700">
  <h4 className="text-sm font-medium text-gray-700 dark:text-gray-300">Labels</h4>
</div>
```

Change the edit/create form input:
```tsx
className="w-full rounded border border-gray-300 dark:border-gray-600 p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
```

Change the form action buttons:
```tsx
className="px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
```

Change the label list empty state:
```tsx
<p className="text-sm text-gray-400 dark:text-gray-500 text-center py-3">Noch keine Labels vorhanden</p>
```

Change each label row hover:
```tsx
className="flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 group cursor-pointer"
```

Change the create button at the bottom:
```tsx
<div className="p-2 border-t border-gray-100 dark:border-gray-700">
  <button
    onClick={() => { setShowCreate(true); setNewName(''); setNewColor(LABEL_COLORS[0]); }}
    className="w-full flex items-center justify-center gap-1.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md px-3 py-2 transition-colors"
  >
```

Change the preview label text:
```tsx
<span className="text-xs text-gray-400 dark:text-gray-500">Vorschau:</span>
```

**Step 5: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 6: Commit**

```bash
git add apps/web/src/features/boards/SwimlaneRow.tsx apps/web/src/features/boards/AddSwimlaneForm.tsx apps/web/src/features/boards/MoveCardPopover.tsx apps/web/src/features/boards/LabelPicker.tsx
git commit -m "feat: add dark mode to swimlane, move-card, and label components"
```

---

### Task 9: CommandPalette

**Files:**
- Modify: `apps/web/src/features/boards/CommandPalette.tsx`

**Step 1: Update CommandPalette.tsx**

The `Modal` wrapper is already handled. Update inner content:

Change the search input row (line 109):
```tsx
<div className="flex items-center gap-2 p-3 border-b border-gray-200 dark:border-gray-700">
  <Search size={16} className="text-gray-400 dark:text-gray-500 flex-shrink-0" />
  <input
    ...
    className="flex-1 text-sm outline-none bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
  />
```

Change the filter pills row:
```tsx
<div className="flex items-center gap-2 px-3 py-2 border-b border-gray-100 dark:border-gray-700 flex-wrap">
```

Change filter pills inactive state (two instances):
```tsx
: 'border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'
```

Change the "Ohne Datum" button active state:
```tsx
? 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 border-transparent'
```

Change the results area text states:
```tsx
<div className="p-6 text-center text-sm text-gray-400 dark:text-gray-500">Suche...</div>
<div className="p-6 text-center text-sm text-gray-400 dark:text-gray-500">...
<div className="p-6 text-center text-sm text-gray-400 dark:text-gray-500">...
```

Change the board group header:
```tsx
<div className="px-3 py-1 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wide">
```

Change the result button:
```tsx
className={`w-full text-left px-3 py-2.5 transition-colors flex items-start gap-2 ${
  flatIndex === selectedIndex ? 'bg-blue-50 dark:bg-blue-900/30' : 'hover:bg-gray-50 dark:hover:bg-gray-700'
}`}
```

Change result title and breadcrumb:
```tsx
<p className="text-sm text-gray-900 dark:text-gray-100 truncate">{result.title}</p>
<p className="text-xs text-gray-400 dark:text-gray-500 mt-0.5">{result.columnName}</p>
```

Change due date text in results:
```tsx
<span className="text-[10px] text-gray-400 dark:text-gray-500">
```

**Step 2: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 3: Commit**

```bash
git add apps/web/src/features/boards/CommandPalette.tsx
git commit -m "feat: add dark mode to CommandPalette"
```

---

### Task 10: CardDetailModal and AttachmentSection

**Files:**
- Modify: `apps/web/src/features/boards/CardDetailModal.tsx`
- Modify: `apps/web/src/features/boards/AttachmentSection.tsx`
- Modify: `apps/web/src/features/boards/ActivityFeed.tsx`

**Step 1: Update CardDetailModal.tsx**

The `Modal` wrapper is already handled. Update internal classes:

Loading text:
```tsx
<div className="p-8 text-center text-gray-500 dark:text-gray-400">Laden...</div>
```

Title input:
```tsx
className="w-full text-xl font-bold text-gray-900 dark:text-gray-100 border-b-2 border-blue-500 outline-none pb-1 bg-transparent"
```

Title heading:
```tsx
className={`text-xl font-bold text-gray-900 dark:text-gray-100 ${canEdit ? 'cursor-pointer hover:text-blue-600' : ''}`}
```

Close button:
```tsx
className="p-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 flex-shrink-0"
```

Metadata row:
```tsx
<div className="flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400">
```

Section labels (all `text-sm font-medium text-gray-700`):
```tsx
className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
```

Description textarea:
```tsx
className="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Description placeholder div:
```tsx
className={`text-sm text-gray-600 dark:text-gray-400 rounded-lg p-3 border border-transparent min-h-[3rem] ${canEdit ? 'cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-200 dark:hover:border-gray-600' : ''}`}
```

Card type inactive buttons:
```tsx
cardDetail.cardType === type ? TYPE_COLORS[type] : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'
```

Continue down through the file for any remaining `text-gray-*`, `bg-gray-*`, and `border-gray-*` classes. Key ones to check: comment section (comment textarea, submitted comments, commenter names), subtasks section (subtask links, checkboxes), assignees section.

For comment input textarea pattern:
```tsx
className="flex-1 rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
```

For comment items:
```tsx
<p className="text-xs text-gray-700 dark:text-gray-300 leading-relaxed">{comment.content}</p>
<p className="text-[10px] text-gray-400 dark:text-gray-500 mt-0.5">
```

For subtask titles:
```tsx
<span className={`text-sm ${sub.cardType === cardDetail.cardType ? 'text-gray-700 dark:text-gray-300' : 'text-gray-600 dark:text-gray-400'}`}>
```

Due date input:
```tsx
className="text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Assignee picker select:
```tsx
className="text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"
```

**Step 2: Update AttachmentSection.tsx**

Change the label:
```tsx
<label className="flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300">
```

Change the attachment item container:
```tsx
<div key={attachment.id} className="flex items-center gap-3 bg-gray-50 dark:bg-gray-700 rounded-lg p-3">
```

Change image border:
```tsx
className="w-12 h-12 object-cover rounded border border-gray-200 dark:border-gray-600"
```

Change file icon placeholder:
```tsx
<div className="w-12 h-12 flex items-center justify-center bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0">
  <FileIcon size={20} className="text-gray-500 dark:text-gray-400" />
</div>
```

Change file name link:
```tsx
className="text-sm font-medium text-gray-800 dark:text-gray-200 hover:text-blue-600 truncate block"
```

Change metadata text:
```tsx
<div className="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
```

**Step 3: Update ActivityFeed.tsx**

Change the skeleton animation colors:
```tsx
<div className="w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600" />
<div className="h-3 bg-gray-200 dark:bg-gray-600 rounded w-3/4" />
<div className="h-2 bg-gray-100 dark:bg-gray-700 rounded w-1/4" />
```

Change the empty state:
```tsx
<div className="text-sm text-gray-400 dark:text-gray-500 text-center py-4">
```

Change the activity item hover:
```tsx
className="flex items-start gap-2 px-2 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded transition-colors"
```

Change activity text:
```tsx
<p className="text-xs text-gray-700 dark:text-gray-300 leading-relaxed">
```

Change timestamp:
```tsx
<p className="text-[10px] text-gray-400 dark:text-gray-500 mt-0.5">
```

**Step 4: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 5: Commit**

```bash
git add apps/web/src/features/boards/CardDetailModal.tsx apps/web/src/features/boards/AttachmentSection.tsx apps/web/src/features/boards/ActivityFeed.tsx
git commit -m "feat: add dark mode to CardDetailModal, AttachmentSection, ActivityFeed"
```

---

### Task 11: CalendarPage, ShareBoardModal, ShortcutHelpModal, TemplatePicker, SaveAsTemplateButton, SharedBoardPage, BoardPage

**Files:**
- Modify: `apps/web/src/features/boards/CalendarPage.tsx`
- Modify: `apps/web/src/features/boards/ShareBoardModal.tsx`
- Modify: `apps/web/src/features/boards/ShortcutHelpModal.tsx`
- Modify: `apps/web/src/features/boards/TemplatePicker.tsx`
- Modify: `apps/web/src/features/boards/SaveAsTemplateButton.tsx`
- Modify: `apps/web/src/features/boards/SharedBoardPage.tsx`
- Modify: `apps/web/src/features/boards/BoardPage.tsx`

**Step 1: Update CalendarPage.tsx**

Loading skeleton:
```tsx
<div className="h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded mb-4" />
<div className="h-96 bg-gray-100 dark:bg-gray-700 rounded-lg" />
```

Month navigation button:
```tsx
className="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
```

Month heading:
```tsx
<h2 className="text-lg font-semibold text-gray-800 dark:text-gray-200">
```

Calendar grid background:
```tsx
<div className="grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden">
```

Weekday headers:
```tsx
<div key={day} className="bg-gray-50 dark:bg-gray-800 p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400">
```

Day cells:
```tsx
className={`bg-white dark:bg-gray-800 min-h-[80px] sm:min-h-[100px] p-1 sm:p-2 ${
  !dayInfo.isCurrentMonth ? 'opacity-40' : ''
}`}
```

Date number:
```tsx
<span className={`text-xs font-medium ${isToday ? 'w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center' : 'text-gray-500 dark:text-gray-400'}`}>
```

Card chips in calendar:
```tsx
className="text-[10px] px-1 py-0.5 rounded text-white truncate cursor-pointer hover:opacity-80 dark:opacity-90"
```
(card colors are already custom style — no change needed)

**Step 2: Update ShareBoardModal.tsx**

Change the heading:
```tsx
<h2 className="text-lg font-semibold text-gray-900 dark:text-gray-100">Board teilen</h2>
```

Change section headings:
```tsx
<h3 className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ...">
```

Change inputs:
```tsx
className="flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Change selects:
```tsx
className="px-2 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Change share item containers:
```tsx
<div key={share.id} className="flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
```

Change share name/email text:
```tsx
<span className="text-sm text-gray-800 dark:text-gray-200">
<span className="text-xs text-gray-400 dark:text-gray-500 ml-2">
```

Change permission badge:
```tsx
<span className="text-xs px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300">
```

Change section labels above lists:
```tsx
<h4 className="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-2">
```

Loading text:
```tsx
<p className="text-sm text-gray-400 dark:text-gray-500">Laden...</p>
```

**Step 3: Update ShortcutHelpModal.tsx**

Change heading:
```tsx
<h2 className="text-lg font-bold text-gray-900 dark:text-gray-100 mb-4">Tastaturkürzel</h2>
```

Change each shortcut description:
```tsx
<span className="text-sm text-gray-600 dark:text-gray-400">{description}</span>
```

Change kbd elements:
```tsx
<kbd className="px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300">
```

Change footer:
```tsx
<div className="mt-6 text-xs text-gray-400 dark:text-gray-500 text-center">
  Drücke <kbd className="px-1 py-0.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded text-gray-500 dark:text-gray-400">?</kbd> ...
```

**Step 4: Update TemplatePicker.tsx**

Change intro text:
```tsx
<p className="text-sm text-gray-500 dark:text-gray-400 mb-4">
```

Change label for board name:
```tsx
<label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Board-Name</label>
```

In `TemplateCard`, change borders and text (selected state background is blue-50 — keep as is since it's colored):
```tsx
className={`text-left p-3 rounded-lg border-2 transition-colors ${
  isSelected
    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/30'
    : 'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800'
}`}
```

Change template name and description:
```tsx
<h3 className="text-sm font-semibold text-gray-900 dark:text-gray-100">{template.name}</h3>
<p className="text-xs text-gray-500 dark:text-gray-400 mb-2 line-clamp-2">{template.description}</p>
```

Change column preview chip:
```tsx
<span key={i} className="text-[10px] px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded">
```

Change swimlane count:
```tsx
<p className="text-[10px] text-gray-400 dark:text-gray-500 mt-1">
```

Change section headers in TemplatePicker:
```tsx
<h3 className="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase ...">
```

Change "Blank board" option:
```tsx
className={`w-full text-left p-3 rounded-lg border-2 transition-colors ${
  selectedId === null
    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/30'
    : 'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800'
}`}
```

```tsx
<h3 className="text-sm font-semibold text-gray-900 dark:text-gray-100">Leeres Board</h3>
<p className="text-xs text-gray-500 dark:text-gray-400">
```

**Step 5: Update SaveAsTemplateButton.tsx**

Change the input in open state:
```tsx
className="text-xs px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 w-36 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
```

Change the cancel button:
```tsx
className="text-xs px-1.5 py-1 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"
```

Change the closed-state button:
```tsx
className={`hidden sm:flex items-center gap-1 text-xs px-2 py-1 rounded-full border transition-colors ${
  saved
    ? 'border-green-300 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400'
    : 'border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'
}`}
```

**Step 6: Update SharedBoardPage.tsx**

Change the page background:
```tsx
<div className="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center">
  <p className="text-gray-500 dark:text-gray-400">Laden...</p>
</div>
```

For the full board view, apply the same card/column dark patterns as in Task 7 — the `SharedBoardPage` uses its own inline card rendering. Look for all `bg-white`, `bg-gray-50`, `text-gray-*`, `border-gray-*` classes and apply the color mapping from the reference table.

**Step 7: Update BoardPage.tsx**

This is the largest file. Key sections to update:

Loading skeleton:
```tsx
<div className="h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded" />
<div className="h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded" />
<div key={col} className="flex-shrink-0 w-72 bg-gray-100 dark:bg-gray-700 rounded-lg p-3">
  <div className="h-4 w-24 bg-gray-200 dark:bg-gray-600 rounded" />
  <div className="h-5 w-8 bg-gray-200 dark:bg-gray-600 rounded-full" />
  <div className="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 mb-2">
    <div className="h-4 w-16 bg-gray-200 dark:bg-gray-600 rounded mb-2" />
    <div className="h-4 w-full bg-gray-200 dark:bg-gray-600 rounded" />
  </div>
```

Board header:
```tsx
<h1 className="text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 truncate">{board.name}</h1>
```

Header action buttons (share, activity):
```tsx
className="hidden sm:flex items-center gap-1 text-xs px-2 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
```

Activity button active state:
```tsx
? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400'
: 'border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'
```

Filter bar buttons (inactive state):
```tsx
: 'border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400'
// (for the main filter button)

: 'border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'
// (for pill buttons)
```

Assignee filter select:
```tsx
className="text-xs px-2 py-1 rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"
```

Filter count text:
```tsx
<span className="text-xs text-gray-400 dark:text-gray-500">
```

Label separator:
```tsx
<span className="text-xs text-gray-400 dark:text-gray-500 hidden sm:inline">|</span>
```

Mobile column tabs (in the `sm:hidden` section):
```tsx
: 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'
```

Column header (ColumnHeader component at the top of BoardPage.tsx):
```tsx
className="p-3 flex items-center gap-2 bg-white dark:bg-gray-800 sticky top-0 z-10 border-b border-gray-200 dark:border-gray-700 cursor-grab active:cursor-grabbing"
```

Column header title:
```tsx
<h3 className="font-semibold text-sm text-gray-700 dark:text-gray-300 truncate">{column.name}</h3>
```

Column header WIP badge:
```tsx
className={`text-xs px-1.5 py-0.5 rounded-full flex-shrink-0 ${
  isOverWipLimit ? 'bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400' : 'bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300'
}`}
```

**Step 8: Lint check**

Run: `pnpm --filter @trello-clone/web lint`
Expected: no errors

**Step 9: Verify via dev server**

Start the dev server:
```bash
pnpm --filter @trello-clone/web dev
```

1. Open the app in the browser
2. Open DevTools → toggle `dark` class on `<html>` element manually
3. Verify all pages look correct in dark mode
4. Open the user menu → click the Dark button → verify `dark` class is added to `<html>`
5. Click System → verify it follows the OS preference
6. Click Light → verify `dark` class is removed
7. Reload the page → verify the preference is restored from localStorage

**Step 10: Commit**

```bash
git add apps/web/src/features/boards/CalendarPage.tsx apps/web/src/features/boards/ShareBoardModal.tsx apps/web/src/features/boards/ShortcutHelpModal.tsx apps/web/src/features/boards/TemplatePicker.tsx apps/web/src/features/boards/SaveAsTemplateButton.tsx apps/web/src/features/boards/SharedBoardPage.tsx apps/web/src/features/boards/BoardPage.tsx
git commit -m "feat: add dark mode to board pages and remaining feature components"
```
